<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="mobile-web-app-capable" content="yes" />
        <meta name="theme-color" content="#111b21" />
        <meta name="description" content="WhatsApp AI Web - Send and receive messages with AI assistance" />
        <title>WhatsApp AI Web</title>
        <link rel="stylesheet" href="/styles.css" />
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
            rel="stylesheet"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@300;400;500;600;700&display=swap"
            rel="stylesheet"
        />
    </head>
    <body>
        <div id="app">
            <!-- Loading Screen -->
            <div id="loading-screen" class="loading-screen">
                <div class="loading-content">
                    <div class="whatsapp-logo">
                        <i class="fab fa-whatsapp"></i>
                    </div>
                    <h2>WhatsApp AI Web</h2>
                    <div class="loading-spinner"></div>
                    <p id="loading-text">Initializing...</p>
                </div>
            </div>

            <!-- QR Code Screen -->
            <div id="qr-screen" class="qr-screen hidden">
                <div class="qr-content">
                    <div class="whatsapp-logo">
                        <i class="fab fa-whatsapp"></i>
                    </div>
                    <h2>Scan QR Code</h2>
                    <p>Scan this QR code with your WhatsApp mobile app</p>
                    <div id="qr-code" class="qr-code"></div>
                    <p class="qr-instructions">
                        1. Open WhatsApp on your phone<br />
                        2. Tap Menu or Settings and select Linked Devices<br />
                        3. Tap Link a Device<br />
                        4. Point your phone at this screen to capture the code
                    </p>
                </div>
            </div>

            <!-- Main App -->
            <div id="main-app" class="main-app hidden">
                <!-- Sidebar -->
                <div class="sidebar">
                    <!-- Header -->
                    <div class="sidebar-header">
                        <div class="user-info">
                            <div class="user-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="user-details">
                                <h3 id="user-name">WhatsApp AI</h3>
                                <p id="user-status">Online</p>
                            </div>
                        </div>
                        <div class="sidebar-actions">
                            <button
                                class="action-btn"
                                id="theme-toggle-btn"
                                title="Toggle Dark/Light Mode"
                                aria-label="Toggle Dark/Light Mode"
                            >
                                <i class="fas fa-moon" aria-hidden="true"></i>
                            </button>
                            <button
                                class="action-btn"
                                id="refresh-chats-btn"
                                title="Refresh Chats"
                                aria-label="Refresh Chats"
                            >
                                <i class="fas fa-sync-alt" aria-hidden="true"></i>
                            </button>
                            <button
                                class="action-btn"
                                id="cache-btn"
                                title="Cache Management"
                                aria-label="Cache Management"
                            >
                                <i class="fas fa-database" aria-hidden="true"></i>
                            </button>
                            <button
                                class="action-btn"
                                id="export-import-btn"
                                title="Export & Import"
                                aria-label="Export & Import"
                            >
                                <i class="fas fa-download" aria-hidden="true"></i>
                            </button>
                            <button
                                class="action-btn"
                                id="settings-btn"
                                title="Settings"
                                aria-label="Settings"
                            >
                                <i class="fas fa-cog" aria-hidden="true"></i>
                            </button>
                            <button
                                class="action-btn"
                                id="new-chat-btn"
                                title="New Chat"
                                aria-label="New Chat"
                            >
                                <i class="fas fa-plus" aria-hidden="true"></i>
                            </button>
                            <button
                                class="action-btn"
                                id="menu-btn"
                                title="Menu"
                                aria-label="Menu"
                            >
                                <i class="fas fa-ellipsis-v" aria-hidden="true"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Search -->
                    <div class="search-container">
                        <div class="search-box">
                            <label for="search-input" class="sr-only">Search or start new chat</label>
                            <i class="fas fa-search" aria-hidden="true"></i>
                            <input
                                type="text"
                                id="search-input"
                                placeholder="Search or start new chat"
                                aria-label="Search or start new chat"
                            />
                        </div>
                        <div class="sort-options">
                            <button class="sort-btn active" id="sort-recent" title="Sort by Recent">
                                <i class="fas fa-clock"></i>
                                <span>Recent</span>
                            </button>
                            <button class="sort-btn" id="sort-unread" title="Sort by Unread">
                                <i class="fas fa-envelope"></i>
                                <span>Unread</span>
                            </button>
                            <button class="sort-btn" id="sort-name" title="Sort by Name">
                                <i class="fas fa-sort-alpha-down"></i>
                                <span>Name</span>
                            </button>
                        </div>
                    </div>

                    <!-- Tabs -->
                    <div class="tabs-container" role="tablist">
                        <button 
                            class="tab-btn active" 
                            id="chats-tab" 
                            role="tab" 
                            aria-selected="true" 
                            aria-controls="chat-list"
                        >
                            <i class="fas fa-comments" aria-hidden="true"></i> Chats
                        </button>
                        <button 
                            class="tab-btn" 
                            id="contacts-tab" 
                            role="tab" 
                            aria-selected="false" 
                            aria-controls="contacts-list"
                        >
                            <i class="fas fa-users" aria-hidden="true"></i> Contacts
                        </button>
                    </div>

                    <!-- Chat List -->
                    <div 
                        class="chat-list" 
                        id="chat-list" 
                        role="tabpanel" 
                        aria-labelledby="chats-tab"
                    >
                        <!-- Chats will be populated here -->
                    </div>

                    <!-- Contacts List -->
                    <div 
                        class="contacts-list hidden" 
                        id="contacts-list" 
                        role="tabpanel" 
                        aria-labelledby="contacts-tab"
                        aria-hidden="true"
                    >
                        <div class="contacts-header">
                            <button 
                                class="btn-secondary" 
                                id="sync-google-btn"
                                aria-label="Sync Google Contacts"
                            >
                                <i class="fab fa-google" aria-hidden="true"></i> Sync Google
                                Contacts
                            </button>
                        </div>
                        <!-- Contacts will be populated here -->
                    </div>

                    <!-- Google Sync Section -->
                    <div
                        class="google-sync-section hidden"
                        id="google-sync-section"
                    >
                        <div class="sync-header">
                            <h3>Google Contacts Sync</h3>
                            <button class="close-btn" id="close-sync-btn" title="Close Google Contacts Sync" aria-label="Close Google Contacts Sync">
                                <i class="fas fa-times" aria-hidden="true"></i>
                            </button>
                        </div>
                        <div class="sync-content">
                            <p>
                                Sync your Google Contacts with WhatsApp contacts
                                to find matches and missing contacts.
                            </p>
                            <div class="sync-actions">
                                <button
                                    class="btn-primary"
                                    id="google-auth-btn"
                                >
                                    <i class="fab fa-google"></i> Connect Google
                                    Account
                                </button>
                                <button
                                    class="btn-secondary"
                                    id="manual-token-btn"
                                >
                                    <i class="fas fa-key"></i> Use Access Token
                                </button>
                            </div>
                            <div class="sync-results hidden" id="sync-results">
                                <!-- Sync results will be shown here -->
                            </div>
                        </div>
                    </div>

                    <!-- Cache Management Section -->
                    <div class="cache-section hidden" id="cache-section">
                        <div class="cache-header">
                            <h3>Cache Management</h3>
                            <button class="close-btn" id="close-cache-btn" title="Close Cache Management" aria-label="Close Cache Management">
                                <i class="fas fa-times" aria-hidden="true"></i>
                            </button>
                        </div>
                        <div class="cache-content">
                            <div class="cache-stats" id="cache-stats">
                                <!-- Cache statistics will be shown here -->
                            </div>
                            <div class="cache-actions">
                                <button
                                    class="cache-btn refresh"
                                    id="refresh-cache-btn"
                                >
                                    <i class="fas fa-sync"></i> Refresh Stats
                                </button>
                                <button
                                    class="cache-btn clear"
                                    id="clear-all-cache-btn"
                                >
                                    <i class="fas fa-trash"></i> Clear All Cache
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chat Area -->
                <div class="chat-area">
                    <!-- Chat Header -->
                    <div class="chat-header">
                        <button class="action-btn back-btn" id="back-to-chats" title="Back to chats" aria-label="Back to chats">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <div class="chat-info">
                            <div class="chat-avatar" id="chat-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="chat-details">
                                <h3 id="chat-name">Select a chat</h3>
                                <p id="chat-status">
                                    Choose a conversation to start
                                </p>
                            </div>
                        </div>
                        <div class="chat-actions">
                            <button
                                class="action-btn"
                                id="search-chat-btn"
                                title="Search in chat"
                            >
                                <i class="fas fa-search"></i>
                            </button>
                            <button
                                class="action-btn"
                                id="video-call-btn"
                                title="Video Call"
                            >
                                <i class="fas fa-video"></i>
                            </button>
                            <button
                                class="action-btn"
                                id="voice-call-btn"
                                title="Voice Call"
                            >
                                <i class="fas fa-phone"></i>
                            </button>
                            <button
                                class="action-btn"
                                id="chat-menu-btn"
                                title="Menu"
                            >
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                        </div>
                    </div>

                    <div class="chat-content">
                        <!-- Messages Area -->
                        <div class="messages-area" id="messages-area">
                            <div class="welcome-message">
                                <div class="welcome-content">
                                    <i class="fab fa-whatsapp"></i>
                                    <h2>WhatsApp AI Web</h2>
                                    <p>
                                        Send and receive messages with AI assistance
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AI Prompt Buttons -->
                    <div
                        class="ai-prompts-container"
                        id="ai-prompts-container"
                    >
                        <div class="ai-prompts-header">
                            <span>AI Suggestions</span>
                            <button
                                id="close-ai-prompts"
                                class="close-ai-prompts"
                                title="Close AI Suggestions"
                            >
                                <span class="sr-only">Close</span>
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="ai-prompts-list" id="ai-prompts-list">
                            <!-- AI-generated prompts will be inserted here -->
                        </div>
                    </div>

                    <!-- Message Input -->
                    <div class="message-input-container">
                        <div class="message-input" role="group" aria-label="Message composition">
                            <button
                                class="input-btn"
                                id="attach-btn"
                                title="Attach"
                                aria-label="Attach file"
                            >
                                <i class="fas fa-paperclip" aria-hidden="true"></i>
                            </button>
                            <button
                                class="input-btn"
                                id="ai-prompts-btn"
                                title="AI Suggestions"
                                aria-label="Show AI suggestions"
                                aria-expanded="false"
                                aria-controls="ai-prompts-container"
                            >
                                <i class="fas fa-magic" aria-hidden="true"></i>
                            </button>
                            <div class="input-wrapper">
                                <label for="message-input" class="sr-only">Type a message</label>
                                <input
                                    type="text"
                                    id="message-input"
                                    placeholder="Type a message"
                                    disabled
                                    aria-label="Type a message"
                                />
                                <button
                                    class="input-btn"
                                    id="emoji-btn"
                                    title="Emoji"
                                    aria-label="Insert emoji"
                                    aria-haspopup="true"
                                >
                                    <i class="fas fa-smile" aria-hidden="true"></i>
                                </button>
                            </div>
                            <button 
                                class="input-btn"
                                id="schedule-btn"
                                title="Schedule Message"
                                aria-label="Schedule message"
                            >
                                <i class="fas fa-clock" aria-hidden="true"></i>
                            </button>
                            <button 
                                class="input-btn"
                                id="voice-btn"
                                title="Voice Message"
                                aria-label="Record voice message"
                            >
                                <i class="fas fa-microphone" aria-hidden="true"></i>
                            </button>
                            <button 
                                class="send-btn" 
                                id="send-btn" 
                                disabled 
                                title="Send"
                                aria-label="Send message"
                            >
                                <i class="fas fa-paper-plane" aria-hidden="true"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Response Modal -->
            <div id="ai-modal" class="ai-modal hidden">
                <div class="ai-modal-content">
                    <div class="ai-modal-header">
                        <h3>AI Response Options</h3>
                        <button class="close-btn" id="close-ai-modal" title="Close AI Response Options" aria-label="Close AI Response Options">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="ai-responses" id="ai-responses">
                        <!-- AI responses will be populated here -->
                    </div>
                    <div class="ai-modal-actions">
                        <button class="btn-secondary" id="generate-more-btn">
                            <i class="fas fa-refresh"></i> Generate More
                        </button>
                    </div>
                </div>
            </div>

            <!-- Voice Recording Overlay -->
            <div
                class="voice-recording-overlay hidden"
                id="voice-recording-overlay"
            >
                <div class="voice-recording-content">
                    <div class="voice-recording-animation">
                        <div class="voice-wave"></div>
                        <div class="voice-wave"></div>
                        <div class="voice-wave"></div>
                    </div>
                    <p class="voice-recording-text">
                        Recording voice message...
                    </p>
                    <div class="voice-recording-controls">
                        <button class="voice-btn cancel" id="voice-cancel-btn">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        <button class="voice-btn send" id="voice-send-btn">
                            <i class="fas fa-paper-plane"></i> Send
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Schedule Message Modal -->
            <div class="modal hidden" id="schedule-modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Schedule Message</h3>
                        <button class="close-modal-btn" id="close-schedule-modal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="schedule-date">Date</label>
                            <input type="date" id="schedule-date" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label for="schedule-time">Time</label>
                            <input type="time" id="schedule-time" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label for="schedule-message">Message</label>
                            <textarea id="schedule-message" class="form-input" rows="4" placeholder="Type your message here"></textarea>
                        </div>
                        <div class="scheduled-message-preview">
                            <p>Your message will be sent at: <span id="scheduled-datetime-display"></span></p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn cancel-btn" id="cancel-schedule-btn">Cancel</button>
                        <button class="btn primary-btn" id="confirm-schedule-btn">Schedule</button>
                    </div>
                </div>
            </div>

            <!-- Contact Details Section -->
            <div
                class="contact-details-section hidden"
                id="contact-details-section"
            >
                <div class="contact-details-header">
                    <h3>Contact Details</h3>
                    <button class="close-btn" id="close-contact-details-btn" title="Close Contact Details" aria-label="Close Contact Details">
                        <span class="sr-only">Close Contact Details</span>
                        <i class="fas fa-times" aria-hidden="true"></i>
                    </button>
                </div>
                <div
                    class="contact-details-content"
                    id="contact-details-content"
                >
                    <!-- Contact details will be populated here -->
                </div>
            </div>

            <!-- Export/Import Section -->
            <div
                class="export-import-section hidden"
                id="export-import-section"
            >
                <div class="export-import-header">
                    <h3>Export & Import</h3>
                    <button class="close-btn" id="close-export-import-btn" title="Close Export & Import">
                        <span class="sr-only">Close Export & Import</span>
                        <i class="fas fa-times" aria-hidden="true"></i>
                    </button>
                </div>
                <div class="export-import-content">
                    <div class="export-section">
                        <h4>Export Data</h4>
                        <div class="export-options">
                            <button class="export-btn" id="export-chats-btn">
                                <i class="fas fa-comments"></i> Export Chats
                            </button>
                            <button class="export-btn" id="export-messages-btn">
                                <i class="fas fa-envelope"></i> Export Messages
                            </button>
                            <button class="export-btn" id="export-contacts-btn">
                                <i class="fas fa-users"></i> Export Contacts
                            </button>
                            <button class="export-btn" id="export-media-btn">
                                <i class="fas fa-images"></i> Export Media
                            </button>
                            <button class="export-btn" id="export-all-btn">
                                <i class="fas fa-download"></i> Export All
                            </button>
                        </div>
                    </div>

                    <div class="import-section">
                        <h4>Import Files</h4>
                        <div class="import-options">
                            <label for="import-files-input" class="sr-only">Select files to import</label>
                            <input
                                type="file"
                                id="import-files-input"
                                multiple
                                accept="image/*,video/*,.pdf,.doc,.docx,.txt"
                                title="Select files to import"
                                placeholder="Choose files"
                                class="hidden-input"
                            />
                            <button class="import-btn" id="import-files-btn">
                                <i class="fas fa-upload"></i> Select Files
                            </button>
                            <div class="import-preview" id="import-preview">
                                <!-- Selected files will be shown here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Modal -->
            <div class="modal hidden" id="settings-modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Settings</h3>
                        <button class="close-modal-btn" id="close-settings-modal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <!-- Theme Settings -->
                        <div class="settings-section">
                            <h4>Appearance</h4>
                            <div class="setting-item">
                                <label for="theme-select">Theme</label>
                                <div class="setting-control">
                                    <select id="theme-select" class="form-input">
                                        <option value="dark">Dark</option>
                                        <option value="light">Light</option>
                                        <option value="system">System Default</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Language Settings -->
                        <div class="settings-section">
                            <h4>Language</h4>
                            <div class="setting-item">
                                <label for="language-select">Interface Language</label>
                                <div class="setting-control">
                                    <select id="language-select" class="form-input">
                                        <option value="en">English</option>
                                        <option value="de">Deutsch (German)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Notification Settings -->
                        <div class="settings-section">
                            <h4>Notifications</h4>
                            <div class="setting-item">
                                <label for="notification-toggle">Enable Notifications</label>
                                <div class="setting-control">
                                    <label class="switch">
                                        <input type="checkbox" id="notification-toggle" checked>
                                        <span class="slider round"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="setting-item">
                                <label for="sound-toggle">Notification Sound</label>
                                <div class="setting-control">
                                    <label class="switch">
                                        <input type="checkbox" id="sound-toggle" checked>
                                        <span class="slider round"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn primary-btn" id="save-settings-btn">Save</button>
                    </div>
                </div>
            </div>

            <!-- Status Indicator -->
            <div id="status-indicator" class="status-indicator">
                <div class="status-dot"></div>
                <span id="status-text">Connecting...</span>
            </div>
        </div>

        <script src="/socket.io/socket.io.js"></script>
        <script src="/js/languages.js"></script>
        <script src="/app.js?v=1.0.1"></script>
    </body>
</html>
